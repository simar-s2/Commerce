{% extends "auctions/layout.html" %}

{% block body %}
    <h2>{{ listing.title }}</h2>
    {% if not watchlist %}
    <form action="{% url 'add_remove_watchlist' listing_id=listing.id %}" method="post">
        {% csrf_token %}
        <input class="btn btn-success" type="submit" value="Add" name="action">
    </form>
    {% else %}
    <form action="{% url 'add_remove_watchlist' listing_id=listing.id %}" method="post">
        {% csrf_token %}
        <input class="btn btn-danger" type="submit" value="Remove" name="action">
    </form>
    {% endif %}
    <br>
    <div>
        {% if listing.image %}
        <img src="{{ listing.image }}" alt="{{ listing.title }}" width="300px">
        {% endif %}
        <h5>Description</h5>
        <p>{{ listing.description }}</p>
        <h5>Starting Bid</h5>
        <p>{{ listing.price }}</p>
        <p>Posted by: <strong>{{ listing.owner }}</strong></p>
    </div>
    <br>
    <form action="{% url 'add_comment' listing_id=listing.id %}" method="post">
        <div class="form-group">
            {% csrf_token %}
            {{ form }}
            <input class="btn btn-primary" type="submit" value="Add Comment">
        </div>
    </form>
    {% for comment in comments %}
    <p>Posted by <strong>{{ comment.user }}</strong></p>
    <p>{{ comment.comment }}</p>
    {% endfor %}
{% endblock %}
